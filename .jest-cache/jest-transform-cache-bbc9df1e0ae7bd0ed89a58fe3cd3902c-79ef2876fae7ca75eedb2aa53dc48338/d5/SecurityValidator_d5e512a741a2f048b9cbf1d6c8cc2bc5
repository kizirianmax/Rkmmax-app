6766e413beda690ea4ec5f800c965db0
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
/**
 * SECURITY VALIDATOR
 * Validação rigorosa de código antes de commits automáticos
 * Previne: Malware, credenciais expostas, deletar arquivos críticos, etc
 */

class SecurityValidator {
  constructor() {
    this.blockedPatterns = {
      // Comandos perigosos
      destructive: [/rm\s+-rf\s+\//, /rm\s+-rf\s+\*/, /del\s+\/s\s+\/q/, /DROP\s+TABLE/i, /DELETE\s+FROM/i, /TRUNCATE\s+TABLE/i],
      // Credenciais expostas
      credentials: [/process\.env\.[A-Z_]+/, /GITHUB_TOKEN/, /API_KEY/, /SECRET_KEY/, /PASSWORD/, /aws_secret_access_key/i, /private_key/i, /bearer\s+[a-z0-9]{40,}/i],
      // Código malicioso
      malicious: [/eval\s*\(/, /Function\s*\(/, /exec\s*\(/, /spawn\s*\(/, /require\s*\(\s*['"]child_process['"]\s*\)/, /import\s+.*\s+from\s+['"]child_process['"]/, /\.shell\s*\(/, /\.exec\s*\(/],
      // Acesso a arquivos críticos
      criticalFiles: [/\.git\//, /\.env/, /node_modules\//, /\.github\/workflows/, /vercel\.json/, /package-lock\.json/, /yarn\.lock/],
      // Modificações perigosas
      dangerousModifications: [/delete\s+.*\.git/i, /remove\s+.*package\.json/i, /truncate\s+.*database/i]
    };
    this.criticalFiles = ['.git', '.github', 'node_modules', '.env', '.env.production', '.env.local', 'package-lock.json', 'yarn.lock', 'vercel.json', 'firebase.json'];
    this.allowedExtensions = ['.js', '.jsx', '.ts', '.tsx', '.json', '.css', '.scss', '.html', '.md', '.py', '.go', '.java', '.rb', '.php', '.sql', '.yml', '.yaml'];
  }

  /**
   * Validação completa de código
   */
  async validateCode(code, filePath) {
    const results = {
      isValid: true,
      errors: [],
      warnings: [],
      severity: 'none',
      // none, low, medium, high, critical
      details: {
        codeLength: code.length,
        filePath,
        timestamp: new Date().toISOString()
      }
    };

    // 1. Verificar extensão do arquivo
    if (!this.isAllowedExtension(filePath)) {
      results.isValid = false;
      results.severity = 'critical';
      results.errors.push({
        type: 'INVALID_FILE_EXTENSION',
        message: `Extensão de arquivo não permitida: ${filePath}`,
        severity: 'critical'
      });
      return results;
    }

    // 2. Verificar se é arquivo crítico
    if (this.isCriticalFile(filePath)) {
      results.isValid = false;
      results.severity = 'critical';
      results.errors.push({
        type: 'CRITICAL_FILE_MODIFICATION',
        message: `Não é permitido modificar arquivo crítico: ${filePath}`,
        severity: 'critical'
      });
      return results;
    }

    // 3. Verificar padrões bloqueados
    const patternCheck = this.checkBlockedPatterns(code);
    if (patternCheck.found.length > 0) {
      results.isValid = false;
      results.severity = 'critical';
      results.errors.push({
        type: 'BLOCKED_PATTERN_DETECTED',
        message: `Padrões perigosos detectados: ${patternCheck.found.join(', ')}`,
        severity: 'critical',
        patterns: patternCheck.details
      });
      return results;
    }

    // 4. Verificar credenciais expostas
    const credentialCheck = this.checkCredentials(code);
    if (credentialCheck.found.length > 0) {
      results.isValid = false;
      results.severity = 'critical';
      results.errors.push({
        type: 'CREDENTIALS_EXPOSED',
        message: `Credenciais potencialmente expostas: ${credentialCheck.found.join(', ')}`,
        severity: 'critical',
        credentials: credentialCheck.details
      });
      return results;
    }

    // 5. Verificar sintaxe básica
    const syntaxCheck = this.checkSyntax(code, filePath);
    if (!syntaxCheck.isValid) {
      results.warnings.push({
        type: 'SYNTAX_WARNING',
        message: syntaxCheck.message,
        severity: 'medium'
      });
    }

    // 6. Verificar tamanho do arquivo
    if (code.length > 1000000) {
      results.warnings.push({
        type: 'FILE_TOO_LARGE',
        message: `Arquivo muito grande (${code.length} bytes)`,
        severity: 'low'
      });
    }

    // 7. Verificar padrões de boas práticas
    const bestPracticesCheck = this.checkBestPractices(code, filePath);
    results.warnings.push(...bestPracticesCheck);
    return results;
  }

  /**
   * Validar múltiplos arquivos
   */
  async validateFiles(files) {
    const results = {
      totalFiles: files.length,
      validFiles: 0,
      invalidFiles: 0,
      warnings: 0,
      details: [],
      isValid: true
    };
    for (const file of files) {
      const validation = await this.validateCode(file.content, file.path);
      results.details.push({
        path: file.path,
        ...validation
      });
      if (!validation.isValid) {
        results.invalidFiles++;
        results.isValid = false;
      } else {
        results.validFiles++;
      }
      if (validation.warnings.length > 0) {
        results.warnings += validation.warnings.length;
      }
    }
    return results;
  }

  /**
   * Verificar extensão permitida
   */
  isAllowedExtension(filePath) {
    const ext = filePath.substring(filePath.lastIndexOf('.'));
    return this.allowedExtensions.includes(ext.toLowerCase());
  }

  /**
   * Verificar se é arquivo crítico
   */
  isCriticalFile(filePath) {
    return this.criticalFiles.some(critical => filePath.includes(critical) || filePath.startsWith(critical));
  }

  /**
   * Verificar padrões bloqueados
   */
  checkBlockedPatterns(code) {
    const found = [];
    const details = [];
    for (const [category, patterns] of Object.entries(this.blockedPatterns)) {
      for (const pattern of patterns) {
        const matches = code.match(pattern);
        if (matches) {
          found.push(category);
          details.push({
            category,
            pattern: pattern.toString(),
            matches: matches.slice(0, 3) // Primeiras 3 ocorrências
          });
        }
      }
    }
    return {
      found: [...new Set(found)],
      details
    };
  }

  /**
   * Verificar credenciais expostas
   */
  checkCredentials(code) {
    const found = [];
    const details = [];
    for (const pattern of this.blockedPatterns.credentials) {
      const matches = code.match(new RegExp(pattern, 'g'));
      if (matches) {
        found.push(...matches);
        details.push({
          pattern: pattern.toString(),
          count: matches.length
        });
      }
    }
    return {
      found: [...new Set(found)],
      details,
      riskLevel: found.length > 0 ? 'CRITICAL' : 'SAFE'
    };
  }

  /**
   * Verificar sintaxe básica
   */
  checkSyntax(code, filePath) {
    const ext = filePath.substring(filePath.lastIndexOf('.'));

    // Verificações básicas por tipo de arquivo
    if (['.js', '.jsx', '.ts', '.tsx'].includes(ext)) {
      // Verificar chaves balanceadas
      const openBraces = (code.match(/{/g) || []).length;
      const closeBraces = (code.match(/}/g) || []).length;
      if (openBraces !== closeBraces) {
        return {
          isValid: false,
          message: `Chaves desbalanceadas: ${openBraces} abertas, ${closeBraces} fechadas`
        };
      }

      // Verificar parênteses balanceados
      const openParens = (code.match(/\(/g) || []).length;
      const closeParens = (code.match(/\)/g) || []).length;
      if (openParens !== closeParens) {
        return {
          isValid: false,
          message: `Parênteses desbalanceados: ${openParens} abertos, ${closeParens} fechados`
        };
      }
    }
    if (['.json'].includes(ext)) {
      try {
        JSON.parse(code);
      } catch (error) {
        return {
          isValid: false,
          message: `JSON inválido: ${error.message}`
        };
      }
    }
    return {
      isValid: true
    };
  }

  /**
   * Verificar boas práticas
   */
  checkBestPractices(code, filePath) {
    const warnings = [];

    // Verificar console.log em produção
    if (code.includes('console.log') && !filePath.includes('test')) {
      warnings.push({
        type: 'CONSOLE_LOG_IN_PRODUCTION',
        message: 'console.log detectado em código de produção',
        severity: 'low',
        suggestion: 'Use logger apropriado em vez de console.log'
      });
    }

    // Verificar TODO/FIXME
    if (code.includes('TODO') || code.includes('FIXME')) {
      warnings.push({
        type: 'UNFINISHED_CODE',
        message: 'Código com TODO/FIXME detectado',
        severity: 'low',
        suggestion: 'Remova comentários TODO/FIXME antes de fazer commit'
      });
    }

    // Verificar comentários de debug
    if (code.includes('debugger')) {
      warnings.push({
        type: 'DEBUG_STATEMENT',
        message: 'Declaração debugger detectada',
        severity: 'medium',
        suggestion: 'Remova debugger antes de fazer commit'
      });
    }
    return warnings;
  }

  /**
   * Gerar relatório de segurança
   */
  generateSecurityReport(validationResults) {
    return {
      timestamp: new Date().toISOString(),
      summary: {
        totalChecks: validationResults.details.length,
        passed: validationResults.validFiles,
        failed: validationResults.invalidFiles,
        warnings: validationResults.warnings,
        overallStatus: validationResults.isValid ? 'SAFE' : 'BLOCKED'
      },
      details: validationResults.details,
      recommendation: validationResults.isValid ? '✅ Código aprovado para commit' : '❌ Código bloqueado - Corrija os erros antes de fazer commit'
    };
  }
}

// Exportar
if (typeof module !== 'undefined' && module.exports) {
  module.exports = SecurityValidator;
}
var _default = exports.default = SecurityValidator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZWN1cml0eVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiYmxvY2tlZFBhdHRlcm5zIiwiZGVzdHJ1Y3RpdmUiLCJjcmVkZW50aWFscyIsIm1hbGljaW91cyIsImNyaXRpY2FsRmlsZXMiLCJkYW5nZXJvdXNNb2RpZmljYXRpb25zIiwiYWxsb3dlZEV4dGVuc2lvbnMiLCJ2YWxpZGF0ZUNvZGUiLCJjb2RlIiwiZmlsZVBhdGgiLCJyZXN1bHRzIiwiaXNWYWxpZCIsImVycm9ycyIsIndhcm5pbmdzIiwic2V2ZXJpdHkiLCJkZXRhaWxzIiwiY29kZUxlbmd0aCIsImxlbmd0aCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImlzQWxsb3dlZEV4dGVuc2lvbiIsInB1c2giLCJ0eXBlIiwibWVzc2FnZSIsImlzQ3JpdGljYWxGaWxlIiwicGF0dGVybkNoZWNrIiwiY2hlY2tCbG9ja2VkUGF0dGVybnMiLCJmb3VuZCIsImpvaW4iLCJwYXR0ZXJucyIsImNyZWRlbnRpYWxDaGVjayIsImNoZWNrQ3JlZGVudGlhbHMiLCJzeW50YXhDaGVjayIsImNoZWNrU3ludGF4IiwiYmVzdFByYWN0aWNlc0NoZWNrIiwiY2hlY2tCZXN0UHJhY3RpY2VzIiwidmFsaWRhdGVGaWxlcyIsImZpbGVzIiwidG90YWxGaWxlcyIsInZhbGlkRmlsZXMiLCJpbnZhbGlkRmlsZXMiLCJmaWxlIiwidmFsaWRhdGlvbiIsImNvbnRlbnQiLCJwYXRoIiwiZXh0Iiwic3Vic3RyaW5nIiwibGFzdEluZGV4T2YiLCJpbmNsdWRlcyIsInRvTG93ZXJDYXNlIiwic29tZSIsImNyaXRpY2FsIiwic3RhcnRzV2l0aCIsImNhdGVnb3J5IiwiT2JqZWN0IiwiZW50cmllcyIsInBhdHRlcm4iLCJtYXRjaGVzIiwibWF0Y2giLCJ0b1N0cmluZyIsInNsaWNlIiwiU2V0IiwiUmVnRXhwIiwiY291bnQiLCJyaXNrTGV2ZWwiLCJvcGVuQnJhY2VzIiwiY2xvc2VCcmFjZXMiLCJvcGVuUGFyZW5zIiwiY2xvc2VQYXJlbnMiLCJKU09OIiwicGFyc2UiLCJlcnJvciIsInN1Z2dlc3Rpb24iLCJnZW5lcmF0ZVNlY3VyaXR5UmVwb3J0IiwidmFsaWRhdGlvblJlc3VsdHMiLCJzdW1tYXJ5IiwidG90YWxDaGVja3MiLCJwYXNzZWQiLCJmYWlsZWQiLCJvdmVyYWxsU3RhdHVzIiwicmVjb21tZW5kYXRpb24iLCJtb2R1bGUiLCJleHBvcnRzIiwiX2RlZmF1bHQiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiU2VjdXJpdHlWYWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTRUNVUklUWSBWQUxJREFUT1JcbiAqIFZhbGlkYcOnw6NvIHJpZ29yb3NhIGRlIGPDs2RpZ28gYW50ZXMgZGUgY29tbWl0cyBhdXRvbcOhdGljb3NcbiAqIFByZXZpbmU6IE1hbHdhcmUsIGNyZWRlbmNpYWlzIGV4cG9zdGFzLCBkZWxldGFyIGFycXVpdm9zIGNyw610aWNvcywgZXRjXG4gKi9cblxuY2xhc3MgU2VjdXJpdHlWYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJsb2NrZWRQYXR0ZXJucyA9IHtcbiAgICAgIC8vIENvbWFuZG9zIHBlcmlnb3Nvc1xuICAgICAgZGVzdHJ1Y3RpdmU6IFtcbiAgICAgICAgL3JtXFxzKy1yZlxccytcXC8vLFxuICAgICAgICAvcm1cXHMrLXJmXFxzK1xcKi8sXG4gICAgICAgIC9kZWxcXHMrXFwvc1xccytcXC9xLyxcbiAgICAgICAgL0RST1BcXHMrVEFCTEUvaSxcbiAgICAgICAgL0RFTEVURVxccytGUk9NL2ksXG4gICAgICAgIC9UUlVOQ0FURVxccytUQUJMRS9pLFxuICAgICAgXSxcbiAgICAgIFxuICAgICAgLy8gQ3JlZGVuY2lhaXMgZXhwb3N0YXNcbiAgICAgIGNyZWRlbnRpYWxzOiBbXG4gICAgICAgIC9wcm9jZXNzXFwuZW52XFwuW0EtWl9dKy8sXG4gICAgICAgIC9HSVRIVUJfVE9LRU4vLFxuICAgICAgICAvQVBJX0tFWS8sXG4gICAgICAgIC9TRUNSRVRfS0VZLyxcbiAgICAgICAgL1BBU1NXT1JELyxcbiAgICAgICAgL2F3c19zZWNyZXRfYWNjZXNzX2tleS9pLFxuICAgICAgICAvcHJpdmF0ZV9rZXkvaSxcbiAgICAgICAgL2JlYXJlclxccytbYS16MC05XXs0MCx9L2ksXG4gICAgICBdLFxuICAgICAgXG4gICAgICAvLyBDw7NkaWdvIG1hbGljaW9zb1xuICAgICAgbWFsaWNpb3VzOiBbXG4gICAgICAgIC9ldmFsXFxzKlxcKC8sXG4gICAgICAgIC9GdW5jdGlvblxccypcXCgvLFxuICAgICAgICAvZXhlY1xccypcXCgvLFxuICAgICAgICAvc3Bhd25cXHMqXFwoLyxcbiAgICAgICAgL3JlcXVpcmVcXHMqXFwoXFxzKlsnXCJdY2hpbGRfcHJvY2Vzc1snXCJdXFxzKlxcKS8sXG4gICAgICAgIC9pbXBvcnRcXHMrLipcXHMrZnJvbVxccytbJ1wiXWNoaWxkX3Byb2Nlc3NbJ1wiXS8sXG4gICAgICAgIC9cXC5zaGVsbFxccypcXCgvLFxuICAgICAgICAvXFwuZXhlY1xccypcXCgvLFxuICAgICAgXSxcbiAgICAgIFxuICAgICAgLy8gQWNlc3NvIGEgYXJxdWl2b3MgY3LDrXRpY29zXG4gICAgICBjcml0aWNhbEZpbGVzOiBbXG4gICAgICAgIC9cXC5naXRcXC8vLFxuICAgICAgICAvXFwuZW52LyxcbiAgICAgICAgL25vZGVfbW9kdWxlc1xcLy8sXG4gICAgICAgIC9cXC5naXRodWJcXC93b3JrZmxvd3MvLFxuICAgICAgICAvdmVyY2VsXFwuanNvbi8sXG4gICAgICAgIC9wYWNrYWdlLWxvY2tcXC5qc29uLyxcbiAgICAgICAgL3lhcm5cXC5sb2NrLyxcbiAgICAgIF0sXG4gICAgICBcbiAgICAgIC8vIE1vZGlmaWNhw6fDtWVzIHBlcmlnb3Nhc1xuICAgICAgZGFuZ2Vyb3VzTW9kaWZpY2F0aW9uczogW1xuICAgICAgICAvZGVsZXRlXFxzKy4qXFwuZ2l0L2ksXG4gICAgICAgIC9yZW1vdmVcXHMrLipwYWNrYWdlXFwuanNvbi9pLFxuICAgICAgICAvdHJ1bmNhdGVcXHMrLipkYXRhYmFzZS9pLFxuICAgICAgXSxcbiAgICB9O1xuXG4gICAgdGhpcy5jcml0aWNhbEZpbGVzID0gW1xuICAgICAgJy5naXQnLFxuICAgICAgJy5naXRodWInLFxuICAgICAgJ25vZGVfbW9kdWxlcycsXG4gICAgICAnLmVudicsXG4gICAgICAnLmVudi5wcm9kdWN0aW9uJyxcbiAgICAgICcuZW52LmxvY2FsJyxcbiAgICAgICdwYWNrYWdlLWxvY2suanNvbicsXG4gICAgICAneWFybi5sb2NrJyxcbiAgICAgICd2ZXJjZWwuanNvbicsXG4gICAgICAnZmlyZWJhc2UuanNvbicsXG4gICAgXTtcblxuICAgIHRoaXMuYWxsb3dlZEV4dGVuc2lvbnMgPSBbXG4gICAgICAnLmpzJyxcbiAgICAgICcuanN4JyxcbiAgICAgICcudHMnLFxuICAgICAgJy50c3gnLFxuICAgICAgJy5qc29uJyxcbiAgICAgICcuY3NzJyxcbiAgICAgICcuc2NzcycsXG4gICAgICAnLmh0bWwnLFxuICAgICAgJy5tZCcsXG4gICAgICAnLnB5JyxcbiAgICAgICcuZ28nLFxuICAgICAgJy5qYXZhJyxcbiAgICAgICcucmInLFxuICAgICAgJy5waHAnLFxuICAgICAgJy5zcWwnLFxuICAgICAgJy55bWwnLFxuICAgICAgJy55YW1sJyxcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYcOnw6NvIGNvbXBsZXRhIGRlIGPDs2RpZ29cbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlQ29kZShjb2RlLCBmaWxlUGF0aCkge1xuICAgIGNvbnN0IHJlc3VsdHMgPSB7XG4gICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIHdhcm5pbmdzOiBbXSxcbiAgICAgIHNldmVyaXR5OiAnbm9uZScsIC8vIG5vbmUsIGxvdywgbWVkaXVtLCBoaWdoLCBjcml0aWNhbFxuICAgICAgZGV0YWlsczoge1xuICAgICAgICBjb2RlTGVuZ3RoOiBjb2RlLmxlbmd0aCxcbiAgICAgICAgZmlsZVBhdGgsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgLy8gMS4gVmVyaWZpY2FyIGV4dGVuc8OjbyBkbyBhcnF1aXZvXG4gICAgaWYgKCF0aGlzLmlzQWxsb3dlZEV4dGVuc2lvbihmaWxlUGF0aCkpIHtcbiAgICAgIHJlc3VsdHMuaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgcmVzdWx0cy5zZXZlcml0eSA9ICdjcml0aWNhbCc7XG4gICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ0lOVkFMSURfRklMRV9FWFRFTlNJT04nLFxuICAgICAgICBtZXNzYWdlOiBgRXh0ZW5zw6NvIGRlIGFycXVpdm8gbsOjbyBwZXJtaXRpZGE6ICR7ZmlsZVBhdGh9YCxcbiAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIC8vIDIuIFZlcmlmaWNhciBzZSDDqSBhcnF1aXZvIGNyw610aWNvXG4gICAgaWYgKHRoaXMuaXNDcml0aWNhbEZpbGUoZmlsZVBhdGgpKSB7XG4gICAgICByZXN1bHRzLmlzVmFsaWQgPSBmYWxzZTtcbiAgICAgIHJlc3VsdHMuc2V2ZXJpdHkgPSAnY3JpdGljYWwnO1xuICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdDUklUSUNBTF9GSUxFX01PRElGSUNBVElPTicsXG4gICAgICAgIG1lc3NhZ2U6IGBOw6NvIMOpIHBlcm1pdGlkbyBtb2RpZmljYXIgYXJxdWl2byBjcsOtdGljbzogJHtmaWxlUGF0aH1gLFxuICAgICAgICBzZXZlcml0eTogJ2NyaXRpY2FsJyxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuXG4gICAgLy8gMy4gVmVyaWZpY2FyIHBhZHLDtWVzIGJsb3F1ZWFkb3NcbiAgICBjb25zdCBwYXR0ZXJuQ2hlY2sgPSB0aGlzLmNoZWNrQmxvY2tlZFBhdHRlcm5zKGNvZGUpO1xuICAgIGlmIChwYXR0ZXJuQ2hlY2suZm91bmQubGVuZ3RoID4gMCkge1xuICAgICAgcmVzdWx0cy5pc1ZhbGlkID0gZmFsc2U7XG4gICAgICByZXN1bHRzLnNldmVyaXR5ID0gJ2NyaXRpY2FsJztcbiAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2goe1xuICAgICAgICB0eXBlOiAnQkxPQ0tFRF9QQVRURVJOX0RFVEVDVEVEJyxcbiAgICAgICAgbWVzc2FnZTogYFBhZHLDtWVzIHBlcmlnb3NvcyBkZXRlY3RhZG9zOiAke3BhdHRlcm5DaGVjay5mb3VuZC5qb2luKCcsICcpfWAsXG4gICAgICAgIHNldmVyaXR5OiAnY3JpdGljYWwnLFxuICAgICAgICBwYXR0ZXJuczogcGF0dGVybkNoZWNrLmRldGFpbHMsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIC8vIDQuIFZlcmlmaWNhciBjcmVkZW5jaWFpcyBleHBvc3Rhc1xuICAgIGNvbnN0IGNyZWRlbnRpYWxDaGVjayA9IHRoaXMuY2hlY2tDcmVkZW50aWFscyhjb2RlKTtcbiAgICBpZiAoY3JlZGVudGlhbENoZWNrLmZvdW5kLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlc3VsdHMuaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgcmVzdWx0cy5zZXZlcml0eSA9ICdjcml0aWNhbCc7XG4gICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ0NSRURFTlRJQUxTX0VYUE9TRUQnLFxuICAgICAgICBtZXNzYWdlOiBgQ3JlZGVuY2lhaXMgcG90ZW5jaWFsbWVudGUgZXhwb3N0YXM6ICR7Y3JlZGVudGlhbENoZWNrLmZvdW5kLmpvaW4oJywgJyl9YCxcbiAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcsXG4gICAgICAgIGNyZWRlbnRpYWxzOiBjcmVkZW50aWFsQ2hlY2suZGV0YWlscyxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuXG4gICAgLy8gNS4gVmVyaWZpY2FyIHNpbnRheGUgYsOhc2ljYVxuICAgIGNvbnN0IHN5bnRheENoZWNrID0gdGhpcy5jaGVja1N5bnRheChjb2RlLCBmaWxlUGF0aCk7XG4gICAgaWYgKCFzeW50YXhDaGVjay5pc1ZhbGlkKSB7XG4gICAgICByZXN1bHRzLndhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiAnU1lOVEFYX1dBUk5JTkcnLFxuICAgICAgICBtZXNzYWdlOiBzeW50YXhDaGVjay5tZXNzYWdlLFxuICAgICAgICBzZXZlcml0eTogJ21lZGl1bScsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyA2LiBWZXJpZmljYXIgdGFtYW5obyBkbyBhcnF1aXZvXG4gICAgaWYgKGNvZGUubGVuZ3RoID4gMTAwMDAwMCkge1xuICAgICAgcmVzdWx0cy53YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ0ZJTEVfVE9PX0xBUkdFJyxcbiAgICAgICAgbWVzc2FnZTogYEFycXVpdm8gbXVpdG8gZ3JhbmRlICgke2NvZGUubGVuZ3RofSBieXRlcylgLFxuICAgICAgICBzZXZlcml0eTogJ2xvdycsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyA3LiBWZXJpZmljYXIgcGFkcsO1ZXMgZGUgYm9hcyBwcsOhdGljYXNcbiAgICBjb25zdCBiZXN0UHJhY3RpY2VzQ2hlY2sgPSB0aGlzLmNoZWNrQmVzdFByYWN0aWNlcyhjb2RlLCBmaWxlUGF0aCk7XG4gICAgcmVzdWx0cy53YXJuaW5ncy5wdXNoKC4uLmJlc3RQcmFjdGljZXNDaGVjayk7XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGFyIG3Dumx0aXBsb3MgYXJxdWl2b3NcbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlRmlsZXMoZmlsZXMpIHtcbiAgICBjb25zdCByZXN1bHRzID0ge1xuICAgICAgdG90YWxGaWxlczogZmlsZXMubGVuZ3RoLFxuICAgICAgdmFsaWRGaWxlczogMCxcbiAgICAgIGludmFsaWRGaWxlczogMCxcbiAgICAgIHdhcm5pbmdzOiAwLFxuICAgICAgZGV0YWlsczogW10sXG4gICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRlQ29kZShmaWxlLmNvbnRlbnQsIGZpbGUucGF0aCk7XG4gICAgICBcbiAgICAgIHJlc3VsdHMuZGV0YWlscy5wdXNoKHtcbiAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAuLi52YWxpZGF0aW9uLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICAgIHJlc3VsdHMuaW52YWxpZEZpbGVzKys7XG4gICAgICAgIHJlc3VsdHMuaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0cy52YWxpZEZpbGVzKys7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWxpZGF0aW9uLndhcm5pbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzdWx0cy53YXJuaW5ncyArPSB2YWxpZGF0aW9uLndhcm5pbmdzLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYXIgZXh0ZW5zw6NvIHBlcm1pdGlkYVxuICAgKi9cbiAgaXNBbGxvd2VkRXh0ZW5zaW9uKGZpbGVQYXRoKSB7XG4gICAgY29uc3QgZXh0ID0gZmlsZVBhdGguc3Vic3RyaW5nKGZpbGVQYXRoLmxhc3RJbmRleE9mKCcuJykpO1xuICAgIHJldHVybiB0aGlzLmFsbG93ZWRFeHRlbnNpb25zLmluY2x1ZGVzKGV4dC50b0xvd2VyQ2FzZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYXIgc2Ugw6kgYXJxdWl2byBjcsOtdGljb1xuICAgKi9cbiAgaXNDcml0aWNhbEZpbGUoZmlsZVBhdGgpIHtcbiAgICByZXR1cm4gdGhpcy5jcml0aWNhbEZpbGVzLnNvbWUoY3JpdGljYWwgPT4gXG4gICAgICBmaWxlUGF0aC5pbmNsdWRlcyhjcml0aWNhbCkgfHwgZmlsZVBhdGguc3RhcnRzV2l0aChjcml0aWNhbClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhciBwYWRyw7VlcyBibG9xdWVhZG9zXG4gICAqL1xuICBjaGVja0Jsb2NrZWRQYXR0ZXJucyhjb2RlKSB7XG4gICAgY29uc3QgZm91bmQgPSBbXTtcbiAgICBjb25zdCBkZXRhaWxzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IFtjYXRlZ29yeSwgcGF0dGVybnNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYmxvY2tlZFBhdHRlcm5zKSkge1xuICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHBhdHRlcm5zKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBjb2RlLm1hdGNoKHBhdHRlcm4pO1xuICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgIGZvdW5kLnB1c2goY2F0ZWdvcnkpO1xuICAgICAgICAgIGRldGFpbHMucHVzaCh7XG4gICAgICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgICAgIHBhdHRlcm46IHBhdHRlcm4udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIG1hdGNoZXM6IG1hdGNoZXMuc2xpY2UoMCwgMyksIC8vIFByaW1laXJhcyAzIG9jb3Jyw6puY2lhc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZm91bmQ6IFsuLi5uZXcgU2V0KGZvdW5kKV0sIGRldGFpbHMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYXIgY3JlZGVuY2lhaXMgZXhwb3N0YXNcbiAgICovXG4gIGNoZWNrQ3JlZGVudGlhbHMoY29kZSkge1xuICAgIGNvbnN0IGZvdW5kID0gW107XG4gICAgY29uc3QgZGV0YWlscyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHRoaXMuYmxvY2tlZFBhdHRlcm5zLmNyZWRlbnRpYWxzKSB7XG4gICAgICBjb25zdCBtYXRjaGVzID0gY29kZS5tYXRjaChuZXcgUmVnRXhwKHBhdHRlcm4sICdnJykpO1xuICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgZm91bmQucHVzaCguLi5tYXRjaGVzKTtcbiAgICAgICAgZGV0YWlscy5wdXNoKHtcbiAgICAgICAgICBwYXR0ZXJuOiBwYXR0ZXJuLnRvU3RyaW5nKCksXG4gICAgICAgICAgY291bnQ6IG1hdGNoZXMubGVuZ3RoLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBcbiAgICAgIGZvdW5kOiBbLi4ubmV3IFNldChmb3VuZCldLCBcbiAgICAgIGRldGFpbHMsXG4gICAgICByaXNrTGV2ZWw6IGZvdW5kLmxlbmd0aCA+IDAgPyAnQ1JJVElDQUwnIDogJ1NBRkUnLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2FyIHNpbnRheGUgYsOhc2ljYVxuICAgKi9cbiAgY2hlY2tTeW50YXgoY29kZSwgZmlsZVBhdGgpIHtcbiAgICBjb25zdCBleHQgPSBmaWxlUGF0aC5zdWJzdHJpbmcoZmlsZVBhdGgubGFzdEluZGV4T2YoJy4nKSk7XG4gICAgXG4gICAgLy8gVmVyaWZpY2HDp8O1ZXMgYsOhc2ljYXMgcG9yIHRpcG8gZGUgYXJxdWl2b1xuICAgIGlmIChbJy5qcycsICcuanN4JywgJy50cycsICcudHN4J10uaW5jbHVkZXMoZXh0KSkge1xuICAgICAgLy8gVmVyaWZpY2FyIGNoYXZlcyBiYWxhbmNlYWRhc1xuICAgICAgY29uc3Qgb3BlbkJyYWNlcyA9IChjb2RlLm1hdGNoKC97L2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgICBjb25zdCBjbG9zZUJyYWNlcyA9IChjb2RlLm1hdGNoKC99L2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgICBcbiAgICAgIGlmIChvcGVuQnJhY2VzICE9PSBjbG9zZUJyYWNlcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBDaGF2ZXMgZGVzYmFsYW5jZWFkYXM6ICR7b3BlbkJyYWNlc30gYWJlcnRhcywgJHtjbG9zZUJyYWNlc30gZmVjaGFkYXNgLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBWZXJpZmljYXIgcGFyw6pudGVzZXMgYmFsYW5jZWFkb3NcbiAgICAgIGNvbnN0IG9wZW5QYXJlbnMgPSAoY29kZS5tYXRjaCgvXFwoL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgICBjb25zdCBjbG9zZVBhcmVucyA9IChjb2RlLm1hdGNoKC9cXCkvZykgfHwgW10pLmxlbmd0aDtcbiAgICAgIFxuICAgICAgaWYgKG9wZW5QYXJlbnMgIT09IGNsb3NlUGFyZW5zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogYFBhcsOqbnRlc2VzIGRlc2JhbGFuY2VhZG9zOiAke29wZW5QYXJlbnN9IGFiZXJ0b3MsICR7Y2xvc2VQYXJlbnN9IGZlY2hhZG9zYCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoWycuanNvbiddLmluY2x1ZGVzKGV4dCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIEpTT04ucGFyc2UoY29kZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBKU09OIGludsOhbGlkbzogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhciBib2FzIHByw6F0aWNhc1xuICAgKi9cbiAgY2hlY2tCZXN0UHJhY3RpY2VzKGNvZGUsIGZpbGVQYXRoKSB7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcblxuICAgIC8vIFZlcmlmaWNhciBjb25zb2xlLmxvZyBlbSBwcm9kdcOnw6NvXG4gICAgaWYgKGNvZGUuaW5jbHVkZXMoJ2NvbnNvbGUubG9nJykgJiYgIWZpbGVQYXRoLmluY2x1ZGVzKCd0ZXN0JykpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiAnQ09OU09MRV9MT0dfSU5fUFJPRFVDVElPTicsXG4gICAgICAgIG1lc3NhZ2U6ICdjb25zb2xlLmxvZyBkZXRlY3RhZG8gZW0gY8OzZGlnbyBkZSBwcm9kdcOnw6NvJyxcbiAgICAgICAgc2V2ZXJpdHk6ICdsb3cnLFxuICAgICAgICBzdWdnZXN0aW9uOiAnVXNlIGxvZ2dlciBhcHJvcHJpYWRvIGVtIHZleiBkZSBjb25zb2xlLmxvZycsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgVE9ETy9GSVhNRVxuICAgIGlmIChjb2RlLmluY2x1ZGVzKCdUT0RPJykgfHwgY29kZS5pbmNsdWRlcygnRklYTUUnKSkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6ICdVTkZJTklTSEVEX0NPREUnLFxuICAgICAgICBtZXNzYWdlOiAnQ8OzZGlnbyBjb20gVE9ETy9GSVhNRSBkZXRlY3RhZG8nLFxuICAgICAgICBzZXZlcml0eTogJ2xvdycsXG4gICAgICAgIHN1Z2dlc3Rpb246ICdSZW1vdmEgY29tZW50w6FyaW9zIFRPRE8vRklYTUUgYW50ZXMgZGUgZmF6ZXIgY29tbWl0JyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciBjb21lbnTDoXJpb3MgZGUgZGVidWdcbiAgICBpZiAoY29kZS5pbmNsdWRlcygnZGVidWdnZXInKSkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6ICdERUJVR19TVEFURU1FTlQnLFxuICAgICAgICBtZXNzYWdlOiAnRGVjbGFyYcOnw6NvIGRlYnVnZ2VyIGRldGVjdGFkYScsXG4gICAgICAgIHNldmVyaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgc3VnZ2VzdGlvbjogJ1JlbW92YSBkZWJ1Z2dlciBhbnRlcyBkZSBmYXplciBjb21taXQnLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHdhcm5pbmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlcmFyIHJlbGF0w7NyaW8gZGUgc2VndXJhbsOnYVxuICAgKi9cbiAgZ2VuZXJhdGVTZWN1cml0eVJlcG9ydCh2YWxpZGF0aW9uUmVzdWx0cykge1xuICAgIHJldHVybiB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgdG90YWxDaGVja3M6IHZhbGlkYXRpb25SZXN1bHRzLmRldGFpbHMubGVuZ3RoLFxuICAgICAgICBwYXNzZWQ6IHZhbGlkYXRpb25SZXN1bHRzLnZhbGlkRmlsZXMsXG4gICAgICAgIGZhaWxlZDogdmFsaWRhdGlvblJlc3VsdHMuaW52YWxpZEZpbGVzLFxuICAgICAgICB3YXJuaW5nczogdmFsaWRhdGlvblJlc3VsdHMud2FybmluZ3MsXG4gICAgICAgIG92ZXJhbGxTdGF0dXM6IHZhbGlkYXRpb25SZXN1bHRzLmlzVmFsaWQgPyAnU0FGRScgOiAnQkxPQ0tFRCcsXG4gICAgICB9LFxuICAgICAgZGV0YWlsczogdmFsaWRhdGlvblJlc3VsdHMuZGV0YWlscyxcbiAgICAgIHJlY29tbWVuZGF0aW9uOiB2YWxpZGF0aW9uUmVzdWx0cy5pc1ZhbGlkIFxuICAgICAgICA/ICfinIUgQ8OzZGlnbyBhcHJvdmFkbyBwYXJhIGNvbW1pdCdcbiAgICAgICAgOiAn4p2MIEPDs2RpZ28gYmxvcXVlYWRvIC0gQ29ycmlqYSBvcyBlcnJvcyBhbnRlcyBkZSBmYXplciBjb21taXQnLFxuICAgIH07XG4gIH1cbn1cblxuLy8gRXhwb3J0YXJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICBtb2R1bGUuZXhwb3J0cyA9IFNlY3VyaXR5VmFsaWRhdG9yO1xufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN1cml0eVZhbGlkYXRvcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxpQkFBaUIsQ0FBQztFQUN0QkMsV0FBV0EsQ0FBQSxFQUFHO0lBQ1osSUFBSSxDQUFDQyxlQUFlLEdBQUc7TUFDckI7TUFDQUMsV0FBVyxFQUFFLENBQ1gsZUFBZSxFQUNmLGVBQWUsRUFDZixpQkFBaUIsRUFDakIsZUFBZSxFQUNmLGdCQUFnQixFQUNoQixtQkFBbUIsQ0FDcEI7TUFFRDtNQUNBQyxXQUFXLEVBQUUsQ0FDWCx1QkFBdUIsRUFDdkIsY0FBYyxFQUNkLFNBQVMsRUFDVCxZQUFZLEVBQ1osVUFBVSxFQUNWLHdCQUF3QixFQUN4QixjQUFjLEVBQ2QseUJBQXlCLENBQzFCO01BRUQ7TUFDQUMsU0FBUyxFQUFFLENBQ1QsV0FBVyxFQUNYLGVBQWUsRUFDZixXQUFXLEVBQ1gsWUFBWSxFQUNaLDJDQUEyQyxFQUMzQyw0Q0FBNEMsRUFDNUMsY0FBYyxFQUNkLGFBQWEsQ0FDZDtNQUVEO01BQ0FDLGFBQWEsRUFBRSxDQUNiLFNBQVMsRUFDVCxPQUFPLEVBQ1AsZ0JBQWdCLEVBQ2hCLHFCQUFxQixFQUNyQixjQUFjLEVBQ2Qsb0JBQW9CLEVBQ3BCLFlBQVksQ0FDYjtNQUVEO01BQ0FDLHNCQUFzQixFQUFFLENBQ3RCLG1CQUFtQixFQUNuQiwyQkFBMkIsRUFDM0Isd0JBQXdCO0lBRTVCLENBQUM7SUFFRCxJQUFJLENBQUNELGFBQWEsR0FBRyxDQUNuQixNQUFNLEVBQ04sU0FBUyxFQUNULGNBQWMsRUFDZCxNQUFNLEVBQ04saUJBQWlCLEVBQ2pCLFlBQVksRUFDWixtQkFBbUIsRUFDbkIsV0FBVyxFQUNYLGFBQWEsRUFDYixlQUFlLENBQ2hCO0lBRUQsSUFBSSxDQUFDRSxpQkFBaUIsR0FBRyxDQUN2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Q0FBQ3lDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSXpDLElBQUksQ0FBQ3lDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRTtNQUNuRHBDLFFBQVEsQ0FBQ1MsSUFBSSxDQUFDO1FBQ1pDLElBQUksRUFBRSxpQkFBaUI7UUFDdkJDLE9BQU8sRUFBRSxpQ0FBaUM7UUFDMUNWLFFBQVEsRUFBRSxLQUFLO1FBQ2YyRCxVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLElBQUlqRSxJQUFJLENBQUN5QyxRQUFRLENBQUMsVUFBVSxDQUFDLEVBQUU7TUFDN0JwQyxRQUFRLENBQUNTLElBQUksQ0FBQztRQUNaQyxJQUFJLEVBQUUsaUJBQWlCO1FBQ3ZCQyxPQUFPLEVBQUUsK0JBQStCO1FBQ3hDVixRQUFRLEVBQUUsUUFBUTtRQUNsQjJELFVBQVUsRUFBRTtNQUNkLENBQUMsQ0FBQztJQUNKO0lBRUEsT0FBTzVELFFBQVE7RUFDakI7O0VBRUE7QUFDRjtBQUNBO0VBQ0U2RCxzQkFBc0JBLENBQUNDLGlCQUFpQixFQUFFO0lBQ3hDLE9BQU87TUFDTHpELFNBQVMsRUFBRSxJQUFJQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxXQUFXLENBQUMsQ0FBQztNQUNuQ3dELE9BQU8sRUFBRTtRQUNQQyxXQUFXLEVBQUVGLGlCQUFpQixDQUFDNUQsT0FBTyxDQUFDRSxNQUFNO1FBQzdDNkQsTUFBTSxFQUFFSCxpQkFBaUIsQ0FBQ25DLFVBQVU7UUFDcEN1QyxNQUFNLEVBQUVKLGlCQUFpQixDQUFDbEMsWUFBWTtRQUN0QzVCLFFBQVEsRUFBRThELGlCQUFpQixDQUFDOUQsUUFBUTtRQUNwQ21FLGFBQWEsRUFBRUwsaUJBQWlCLENBQUNoRSxPQUFPLEdBQUcsTUFBTSxHQUFHO01BQ3RELENBQUM7TUFDREksT0FBTyxFQUFFNEQsaUJBQWlCLENBQUM1RCxPQUFPO01BQ2xDa0UsY0FBYyxFQUFFTixpQkFBaUIsQ0FBQ2hFLE9BQU8sR0FDckMsK0JBQStCLEdBQy9CO0lBQ04sQ0FBQztFQUNIO0FBQ0Y7O0FBRUE7QUFDQSxJQUFJLE9BQU91RSxNQUFNLEtBQUssV0FBVyxJQUFJQSxNQUFNLENBQUNDLE9BQU8sRUFBRTtFQUNuREQsTUFBTSxDQUFDQyxPQUFPLEdBQUdyRixpQkFBaUI7QUFDcEM7QUFBQyxJQUFBc0YsUUFBQSxHQUFBRCxPQUFBLENBQUFFLE9BQUEsR0FFY3ZGLGlCQUFpQiIsImlnbm9yZUxpc3QiOltdfQ==