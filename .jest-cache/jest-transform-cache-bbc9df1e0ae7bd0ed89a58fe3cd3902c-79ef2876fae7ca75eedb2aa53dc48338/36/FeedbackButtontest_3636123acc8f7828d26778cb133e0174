ff26984f6b44f38fe1f673270eb5b191
"use strict";

// Mock Sentry and Analytics
_getJestObj().mock("../lib/sentry.js", () => ({
  captureMessage: jest.fn()
}));
_getJestObj().mock("../lib/analytics.js", () => ({
  trackEvent: jest.fn(),
  Events: {
    FEEDBACK_SUBMITTED: "feedback_submitted"
  }
}));
var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
require("@testing-library/jest-dom");
var _FeedbackButton = _interopRequireDefault(require("./FeedbackButton.jsx"));
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
} // src/components/FeedbackButton.test.jsx
describe("FeedbackButton Component", () => {
  beforeEach(() => {
    global.fetch = jest.fn(() => Promise.resolve({
      ok: true,
      json: () => Promise.resolve({
        ok: true
      })
    }));
  });
  afterEach(() => {
    jest.clearAllMocks();
  });
  test("renders feedback button", () => {
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_FeedbackButton.default, {}));
    const button = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    expect(button).toBeInTheDocument();
  });
  test("opens feedback form when button is clicked", () => {
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_FeedbackButton.default, {}));
    const button = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    _react2.fireEvent.click(button);
    expect(_react2.screen.getByText(/enviar feedback/i)).toBeInTheDocument();
  });
  test("closes form when close button is clicked", () => {
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_FeedbackButton.default, {}));
    const openButton = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    _react2.fireEvent.click(openButton);
    const closeButton = _react2.screen.getByRole("button", {
      name: /fechar/i
    });
    _react2.fireEvent.click(closeButton);
    expect(_react2.screen.queryByText(/enviar feedback/i)).not.toBeInTheDocument();
  });
  test("submits feedback successfully", async () => {
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_FeedbackButton.default, {}));
    const openButton = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    _react2.fireEvent.click(openButton);
    const textarea = _react2.screen.getByPlaceholderText(/descreva o problema/i);
    _react2.fireEvent.change(textarea, {
      target: {
        value: "Test feedback"
      }
    });
    const submitButton = _react2.screen.getByRole("button", {
      name: /enviar feedback/i
    });
    _react2.fireEvent.click(submitButton);
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText(/feedback enviado/i)).toBeInTheDocument();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJjYXB0dXJlTWVzc2FnZSIsImplc3QiLCJmbiIsInRyYWNrRXZlbnQiLCJFdmVudHMiLCJGRUVEQkFDS19TVUJNSVRURUQiLCJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdDIiLCJfRmVlZGJhY2tCdXR0b24iLCJfanN4UnVudGltZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImdsb2JhbCIsImZldGNoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvayIsImpzb24iLCJhZnRlckVhY2giLCJjbGVhckFsbE1vY2tzIiwidGVzdCIsInJlbmRlciIsImpzeCIsImJ1dHRvbiIsInNjcmVlbiIsImdldEJ5Um9sZSIsIm5hbWUiLCJleHBlY3QiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImZpcmVFdmVudCIsImNsaWNrIiwiZ2V0QnlUZXh0Iiwib3BlbkJ1dHRvbiIsImNsb3NlQnV0dG9uIiwicXVlcnlCeVRleHQiLCJub3QiLCJ0ZXh0YXJlYSIsImdldEJ5UGxhY2Vob2xkZXJUZXh0IiwiY2hhbmdlIiwidGFyZ2V0IiwidmFsdWUiLCJzdWJtaXRCdXR0b24iLCJ3YWl0Rm9yIl0sInNvdXJjZXMiOlsiRmVlZGJhY2tCdXR0b24udGVzdC5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbXBvbmVudHMvRmVlZGJhY2tCdXR0b24udGVzdC5qc3hcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tIFwiQHRlc3RpbmctbGlicmFyeS9yZWFjdFwiO1xuaW1wb3J0IFwiQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbVwiO1xuaW1wb3J0IEZlZWRiYWNrQnV0dG9uIGZyb20gXCIuL0ZlZWRiYWNrQnV0dG9uLmpzeFwiO1xuXG4vLyBNb2NrIFNlbnRyeSBhbmQgQW5hbHl0aWNzXG5qZXN0Lm1vY2soXCIuLi9saWIvc2VudHJ5LmpzXCIsICgpID0+ICh7XG4gIGNhcHR1cmVNZXNzYWdlOiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jayhcIi4uL2xpYi9hbmFseXRpY3MuanNcIiwgKCkgPT4gKHtcbiAgdHJhY2tFdmVudDogamVzdC5mbigpLFxuICBFdmVudHM6IHsgRkVFREJBQ0tfU1VCTUlUVEVEOiBcImZlZWRiYWNrX3N1Ym1pdHRlZFwiIH0sXG59KSk7XG5cbmRlc2NyaWJlKFwiRmVlZGJhY2tCdXR0b24gQ29tcG9uZW50XCIsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigoKSA9PlxuICAgICAgUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IG9rOiB0cnVlIH0pLFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICB0ZXN0KFwicmVuZGVycyBmZWVkYmFjayBidXR0b25cIiwgKCkgPT4ge1xuICAgIHJlbmRlcig8RmVlZGJhY2tCdXR0b24gLz4pO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoXCJidXR0b25cIiwgeyBuYW1lOiAvZmVlZGJhY2svaSB9KTtcbiAgICBleHBlY3QoYnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICB0ZXN0KFwib3BlbnMgZmVlZGJhY2sgZm9ybSB3aGVuIGJ1dHRvbiBpcyBjbGlja2VkXCIsICgpID0+IHtcbiAgICByZW5kZXIoPEZlZWRiYWNrQnV0dG9uIC8+KTtcbiAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKFwiYnV0dG9uXCIsIHsgbmFtZTogL2ZlZWRiYWNrL2kgfSk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKGJ1dHRvbik7XG4gICAgXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2VudmlhciBmZWVkYmFjay9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgdGVzdChcImNsb3NlcyBmb3JtIHdoZW4gY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWRcIiwgKCkgPT4ge1xuICAgIHJlbmRlcig8RmVlZGJhY2tCdXR0b24gLz4pO1xuICAgIGNvbnN0IG9wZW5CdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKFwiYnV0dG9uXCIsIHsgbmFtZTogL2ZlZWRiYWNrL2kgfSk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKG9wZW5CdXR0b24pO1xuICAgIFxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZShcImJ1dHRvblwiLCB7IG5hbWU6IC9mZWNoYXIvaSB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2soY2xvc2VCdXR0b24pO1xuICAgIFxuICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoL2VudmlhciBmZWVkYmFjay9pKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIHRlc3QoXCJzdWJtaXRzIGZlZWRiYWNrIHN1Y2Nlc3NmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKDxGZWVkYmFja0J1dHRvbiAvPik7XG4gICAgY29uc3Qgb3BlbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoXCJidXR0b25cIiwgeyBuYW1lOiAvZmVlZGJhY2svaSB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2sob3BlbkJ1dHRvbik7XG4gICAgXG4gICAgY29uc3QgdGV4dGFyZWEgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL2Rlc2NyZXZhIG8gcHJvYmxlbWEvaSk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZSh0ZXh0YXJlYSwgeyB0YXJnZXQ6IHsgdmFsdWU6IFwiVGVzdCBmZWVkYmFja1wiIH0gfSk7XG4gICAgXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZShcImJ1dHRvblwiLCB7IG5hbWU6IC9lbnZpYXIgZmVlZGJhY2svaSB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9mZWVkYmFjayBlbnZpYWRvL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG4iXSwibWFwcGluZ3MiOiI7O0FBTUE7QUFDQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsT0FBTztFQUNuQ0MsY0FBYyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQztBQUMxQixDQUFDLENBQUMsQ0FBQztBQUVISixXQUFBLEdBQUtDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxPQUFPO0VBQ3RDSSxVQUFVLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7RUFDckJFLE1BQU0sRUFBRTtJQUFFQyxrQkFBa0IsRUFBRTtFQUFxQjtBQUNyRCxDQUFDLENBQUMsQ0FBQztBQWJILElBQUFDLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBQSxPQUFBO0FBQ0EsSUFBQUUsZUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQWtELElBQUFHLFdBQUEsR0FBQUgsT0FBQTtBQUFBLFNBQUFELHVCQUFBSyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBQUEsU0FBQWQsWUFBQTtFQUFBO0lBQUFHO0VBQUEsSUFBQU8sT0FBQTtFQUFBVixXQUFBLEdBQUFBLENBQUEsS0FBQUcsSUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQSxFQUpsRDtBQWdCQWMsUUFBUSxDQUFDLDBCQUEwQixFQUFFLE1BQU07RUFDekNDLFVBQVUsQ0FBQyxN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