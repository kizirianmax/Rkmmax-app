b80e361640efaee024f78321295c177c
/**
 * AUTOMATION ENGINE
 * Motor central de automaÃ§Ã£o que orquestra todo o processo
 * Coordena: AnÃ¡lise â†’ SeleÃ§Ã£o de Especialista â†’ GeraÃ§Ã£o de CÃ³digo â†’ ValidaÃ§Ã£o â†’ Commit
 */

import SecurityValidator from './SecurityValidator.js';
import AuditLogger from './AuditLogger.js';
import GitHubAutomation from './GitHubAutomation.js';
import SpecialistSelector from './SpecialistSelector.js';
class AutomationEngine {
  constructor(config = {}) {
    this.config = {
      maxRetries: config.maxRetries || 3,
      timeout: config.timeout || 30000,
      aiModel: config.aiModel || 'gemini-2.0-flash',
      temperature: config.temperature || 0.7,
      ...config
    };
    this.validator = new SecurityValidator();
    this.auditLogger = new AuditLogger();
    this.specialistSelector = new SpecialistSelector();

    // GitHub serÃ¡ inicializado quando necessÃ¡rio
    this.gitHub = null;
  }

  /**
   * Inicializar GitHub Automation
   */
  initializeGitHub(token) {
    try {
      this.gitHub = new GitHubAutomation(token);
      return true;
    } catch (error) {
      console.error('Erro ao inicializar GitHub:', error);
      return false;
    }
  }

  /**
   * Executar automaÃ§Ã£o completa
   */
  async executeAutomation(request) {
    const automationId = this.auditLogger.logAutomationRequest({
      userId: request.userId,
      username: request.username,
      command: request.command,
      mode: request.mode || 'OPTIMIZED',
      selectedSpecialist: request.selectedSpecialist,
      description: request.description,
      ipAddress: request.ipAddress,
      userAgent: request.userAgent,
      sessionId: request.sessionId
    });
    const result = {
      automationId,
      status: 'INITIATED',
      steps: [],
      errors: []
    };
    try {
      // Fase 1: AnÃ¡lise do comando
      console.log(`\nðŸ“‹ FASE 1: AnÃ¡lise do comando`);
      const analysis = await this.analyzeCommand(request.command);
      result.steps.push({
        phase: 'ANALYSIS',
        status: 'COMPLETED',
        details: analysis
      });

      // Fase 2: SeleÃ§Ã£o de especialista
      console.log(`\nðŸŽ¯ FASE 2: SeleÃ§Ã£o de especialista`);
      let specialist;
      if (request.mode === 'HYBRID' && request.selectedSpecialist) {
        specialist = request.selectedSpecialist;
        console.log(`âœ… Especialista selecionado manualmente: ${specialist}`);
      } else {
        specialist = await this.specialistSelector.selectSpecialist(analysis.taskType, analysis.keywords);
        console.log(`âœ… Especialista selecionado automaticamente: ${specialist}`);
      }
      result.steps.push({
        phase: 'SPECIALIST_SELECTION',
        status: 'COMPLETED',
        specialist,
        mode: request.mode
      });

      // Fase 3: GeraÃ§Ã£o de cÃ³digo
      console.log(`\nðŸ’» FASE 3: GeraÃ§Ã£o de cÃ³digo`);
      const codeGeneration = await this.generateCode(analysis, specialist, request.repositoryInfo);
      result.steps.push({
        phase: 'CODE_GENERATION',
        status: 'COMPLETED',
        filesGenerated: codeGeneration.files.length,
        linesOfCode: codeGeneration.totalLines
      });

      // Fase 4: ValidaÃ§Ã£o de seguranÃ§a
      console.log(`\nðŸ” FASE 4: ValidaÃ§Ã£o de seguranÃ§a`);
      const securityValidation = await this.validateCode(codeGeneration.files);
      if (!securityValidation.isValid) {
        result.status = 'BLOCKED';
        result.errors.push({
          phase: 'SECURITY_VALIDATION',
          message: 'CÃ³digo bloqueado por validaÃ§Ã£o de seguranÃ§a',
          details: securityValidation
        });
        this.auditLogger.logSecurityValidation({
          automationId,
          filesChecked: codeGeneration.files.length,
          isValid: false,
          severity: securityValidation.severity,
          errors: securityValidation.errors,
          warnings: securityValidation.warnings
        });
        return result;
      }
      result.steps.push({
        phase: 'SECURITY_VALIDATION',
        status: 'COMPLETED',
        warnings: securityValidation.warnings.length
      });

      // Fase 5: Commit + Push
      console.log(`\nðŸ“ FASE 5: Commit + Push`);
      let commitResult = null;
      if (request.repositoryInfo && this.gitHub) {
        commitResult = await this.commitAndPush(codeGeneration.files, analysis.commitMessage, request.repositoryInfo, specialist);
        result.steps.push({
          phase: 'GIT_COMMIT',
          status: 'COMPLETED',
          commitHash: commitResult.commit.sha,
          filesChanged: commitResult.filesChanged
        });
      }

      // Fase 6: Criar PR (opcional)
      console.log(`\nðŸ”€ FASE 6: Criar Pull Request (opcional)`);
      let prResult = null;
      if (request.createPR && this.gitHub && commitResult) {
        prResult = await this.createPullRequest(analysis, specialist, request.repositoryInfo);
        result.steps.push({
          phase: 'CREATE_PR',
          status: 'COMPLETED',
          prNumber: prResult.pr.number,
          prUrl: prResult.pr.url
        });
      }

      // Sucesso!
      result.status = 'SUCCESS';
      result.output = {
        files: codeGeneration.files,
        commit: commitResult?.commit,
        pr: prResult?.pr
      };

      // Log de conclusÃ£o
      this.auditLogger.logAutomationCompletion({
        automationId,
        userId: request.userId,
        status: 'SUCCESS',
        totalDuration: result.totalDuration,
        commitHash: commitResult?.commit.sha,
        prUrl: prResult?.pr.url,
        filesCreated: codeGeneration.files.length,
        linesAdded: codeGeneration.totalLines,
        specialist,
        mode: request.mode,
        creditsUsed: request.creditsUsed
      });
      return result;
    } catch (error) {
      console.error(`âŒ Erro na automaÃ§Ã£o: ${error.message}`);
      result.status = 'FAILED';
      result.errors.push({
        message: error.message,
        stack: error.stack
      });

      // Log de erro
      this.auditLogger.logError({
        automationId,
        userId: request.userId,
        errorType: error.constructor.name,
        errorMessage: error.message,
        errorStack: error.stack,
        phase: result.steps[result.steps.length - 1]?.phase || 'UNKNOWN'
      });
      return result;
    }
  }

  /**
   * Analisar comando do usuÃ¡rio
   */
  async analyzeCommand(command) {
    // Aqui seria chamada uma IA para analisar o comando
    // Por enquanto, anÃ¡lise simples

    const keywords = command.toLowerCase().split(' ');
    let taskType = 'GENERAL';
    if (command.includes('componente') || command.includes('component')) taskType = 'COMPONENT';
    if (command.includes('funÃ§Ã£o') || command.includes('function')) taskType = 'FUNCTION';
    if (command.includes('teste') || command.includes('test')) taskType = 'TEST';
    if (command.includes('estilo') || command.includes('style')) taskType = 'STYLE';
    if (command.includes('documentaÃ§Ã£o') || command.includes('documentation')) taskType = 'DOCUMENTATION';
    if (command.includes('refatorar') || command.includes('refactor')) taskType = 'REFACTOR';
    return {
      command,
      taskType,
      keywords,
      commitMessage: `feat: ${command.substring(0, 50)}`,
      description: command
    };
  }

  /**
   * Gerar cÃ³digo via IA
   */
  async generateCode(analysis, specialist, repositoryInfo) {
    // Aqui seria chamada a IA (Gemini, GROQ, etc)
    // Por enquanto, simulaÃ§Ã£o

    console.log(`ðŸ¤– Gerando cÃ³digo com ${specialist}...`);

    // Simular geraÃ§Ã£o de cÃ³digo
    const files = [{
      path: `src/generated_${Date.now()}.js`,
      content: `// Gerado automaticamente por ${specialist}\n// Tarefa: ${analysis.description}\n\nexport default function generated() {\n  // CÃ³digo gerado aqui\n}\n`
    }];
    return {
      files,
      totalLines: files.reduce((sum, f) => sum + f.content.split('\n').length, 0),
      specialist
    };
  }

  /**
   * Validar cÃ³digo
   */
  async validateCode(files) {
    console.log(`ðŸ” Validando ${files.length} arquivos...`);
    const validation = await this.validator.validateFiles(files);
    if (!validation.isValid) {
      console.log(`âŒ ValidaÃ§Ã£o falhou!`);
      return {
        isValid: false,
        severity: 'critical',
        errors: validation.details.flatMap(d => d.errors),
        warnings: validation.details.flatMap(d => d.warnings)
      };
    }
    console.log(`âœ… CÃ³digo validado com sucesso!`);
    return {
      isValid: true,
      severity: 'none',
      errors: [],
      warnings: validation.details.flatMap(d => d.warnings)
    };
  }

  /**
   * Fazer commit + push
   */
  async commitAndPush(files, message, repositoryInfo, specialist) {
    console.log(`ðŸ“ Fazendo commit + push...`);
    if (!this.gitHub) {
      throw new Error('GitHub nÃ£o inicializado');
    }
    const result = await this.gitHub.commitAndPush(repositoryInfo.owner, repositoryInfo.repo, files, message, repositoryInfo.branch || 'main', {
      name: `${specialist} Bot`,
      email: `${specialist.toLowerCase()}@rkmmax.com`
    });
    console.log(`âœ… Commit realizado: ${result.commit.sha.substring(0, 7)}`);
    return result;
  }

  /**
   * Criar Pull Request
   */
  async createPullRequest(analysis, specialist, repositoryInfo) {
    console.log(`ðŸ”€ Criando Pull Request...`);
    if (!this.gitHub) {
      throw new Error('GitHub nÃ£o inicializado');
    }
    const branchName = `automation/${specialist.toLowerCase()}/${Date.now()}`;
    const pr = await this.gitHub.createPullRequest(repositoryInfo.owner, repositoryInfo.repo, `[${specialist}] ${analysis.commitMessage}`, `AutomaÃ§Ã£o executada por ${specialist}\n\nTarefa: ${analysis.description}`, branchName, repositoryInfo.branch || 'main');
    console.log(`âœ… PR criado: ${pr.url}`);
    return {
      pr
    };
  }

  /**
   * Obter histÃ³rico de automaÃ§Ãµes
   */
  getAutomationHistory(userId, limit = 50) {
    return this.auditLogger.searchLogs({
      type: 'AUTOMATION_REQUEST',
      userId
    }).slice(-limit);
  }

  /**
   * Obter estatÃ­sticas de automaÃ§Ã£o
   */
  getAutomationStats(userId) {
    const logs = this.auditLogger.searchLogs({
      userId
    });
    const stats = {
      totalAutomations: logs.length,
      successfulAutomations: logs.filter(l => l.status === 'SUCCESS').length,
      failedAutomations: logs.filter(l => l.status === 'FAILED').length,
      blockedAutomations: logs.filter(l => l.status === 'BLOCKED').length,
      byMode: {},
      bySpecialist: {}
    };
    logs.forEach(log => {
      if (log.mode) {
        stats.byMode[log.mode] = (stats.byMode[log.mode] || 0) + 1;
      }
      if (log.selectedSpecialist) {
        stats.bySpecialist[log.selectedSpecialist] = (stats.bySpecialist[log.selectedSpecialist] || 0) + 1;
      }
    });
    return stats;
  }
}

// Exportar
if (typeof module !== 'undefined' && module.exports) {
  module.exports = AutomationEngine;
}
export default AutomationEngine;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZWN1cml0eVZhbGlkYXRvciIsIkF1ZGl0TG9nZ2VyIiwiR2l0SHViQXV0b21hdGlvbiIsIlNwZWNpYWxpc3RTZWxlY3RvciIsIkF1dG9tYXRpb25FbmdpbmUiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsIm1heFJldHJpZXMiLCJ0aW1lb3V0IiwiYWlNb2RlbCIsInRlbXBlcmF0dXJlIiwidmFsaWRhdG9yIiwiYXVkaXRMb2dnZXIiLCJzcGVjaWFsaXN0U2VsZWN0b3IiLCJnaXRIdWIiLCJpbml0aWFsaXplR2l0SHViIiwidG9rZW4iLCJlcnJvciIsImNvbnNvbGUiLCJleGVjdXRlQXV0b21hdGlvbiIsInJlcXVlc3QiLCJhdXRvbWF0aW9uSWQiLCJsb2dBdXRvbWF0aW9uUmVxdWVzdCIsInVzZXJJZCIsInVzZXJuYW1lIiwiY29tbWFuZCIsIm1vZGUiLCJzZWxlY3RlZFNwZWNpYWxpc3QiLCJkZXNjcmlwdGlvbiIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsInNlc3Npb25JZCIsInJlc3VsdCIsInN0YXR1cyIsInN0ZXBzIiwiZXJyb3JzIiwibG9nIiwiYW5hbHlzaXMiLCJhbmFseXplQ29tbWFuZCIsInB1c2giLCJwaGFzZSIsImRldGFpbHMiLCJzcGVjaWFsaXN0Iiwic2VsZWN0U3BlY2lhbGlzdCIsInRhc2tUeXBlIiwia2V5d29yZHMiLCJjb2RlR2VuZXJhdGlvbiIsImdlbmVyYXRlQ29kZSIsInJlcG9zaXRvcnlJbmZvIiwiZmlsZXNHZW5lcmF0ZWQiLCJmaWxlcyIsImxlbmd0aCIsImxpbmVzT2ZDb2RlIiwidG90YWxMaW5lcyIsInNlY3VyaXR5VmFsaWRhdGlvbiIsInZhbGlkYXRlQ29kZSIsImlzVmFsaWQiLCJtZXNzYWdlIiwibG9nU2VjdXJpdHlWYWxpZGF0aW9uIiwiZmlsZXNDaGVja2VkIiwic2V2ZXJpdHkiLCJ3YXJuaW5ncyIsImNvbW1pdFJlc3VsdCIsImNvbW1pdEFuZFB1c2giLCJjb21taXRNZXNzYWdlIiwiY29tbWl0SGFzaCIsImNvbW1pdCIsInNoYSIsImZpbGVzQ2hhbmdlZCIsInByUmVzdWx0IiwiY3JlYXRlUFIiLCJjcmVhdGVQdWxsUmVxdWVzdCIsInByTnVtYmVyIiwicHIiLCJudW1iZXIiLCJwclVybCIsInVybCIsIm91dHB1dCIsImxvZ0F1dG9tYXRpb25Db21wbGV0aW9uIiwidG90YWxEdXJhdGlvbiIsImZpbGVzQ3JlYXRlZCIsImxpbmVzQWRkZWQiLCJjcmVkaXRzVXNlZCIsInN0YWNrIiwibG9nRXJyb3IiLCJlcnJvclR5cGUiLCJuYW1lIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JTdGFjayIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJpbmNsdWRlcyIsInN1YnN0cmluZyIsInBhdGgiLCJEYXRlIiwibm93IiwiY29udGVudCIsInJlZHVjZSIsInN1bSIsImYiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVGaWxlcyIsImZsYXRNYXAiLCJkIiwiRXJyb3IiLCJvd25lciIsInJlcG8iLCJicmFuY2giLCJlbWFpbCIsImJyYW5jaE5hbWUiLCJnZXRBdXRvbWF0aW9uSGlzdG9yeSIsImxpbWl0Iiwic2VhcmNoTG9ncyIsInR5cGUiLCJzbGljZSIsImdldEF1dG9tYXRpb25TdGF0cyIsImxvZ3MiLCJzdGF0cyIsInRvdGFsQXV0b21hdGlvbnMiLCJzdWNjZXNzZnVsQXV0b21hdGlvbnMiLCJmaWx0ZXIiLCJsIiwiZmFpbGVkQXV0b21hdGlvbnMiLCJibG9ja2VkQXV0b21hdGlvbnMiLCJieU1vZGUiLCJieVNwZWNpYWxpc3QiLCJmb3JFYWNoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIkF1dG9tYXRpb25FbmdpbmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBVVRPTUFUSU9OIEVOR0lORVxuICogTW90b3IgY2VudHJhbCBkZSBhdXRvbWHDp8OjbyBxdWUgb3JxdWVzdHJhIHRvZG8gbyBwcm9jZXNzb1xuICogQ29vcmRlbmE6IEFuw6FsaXNlIOKGkiBTZWxlw6fDo28gZGUgRXNwZWNpYWxpc3RhIOKGkiBHZXJhw6fDo28gZGUgQ8OzZGlnbyDihpIgVmFsaWRhw6fDo28g4oaSIENvbW1pdFxuICovXG5cbmltcG9ydCBTZWN1cml0eVZhbGlkYXRvciBmcm9tICcuL1NlY3VyaXR5VmFsaWRhdG9yLmpzJztcbmltcG9ydCBBdWRpdExvZ2dlciBmcm9tICcuL0F1ZGl0TG9nZ2VyLmpzJztcbmltcG9ydCBHaXRIdWJBdXRvbWF0aW9uIGZyb20gJy4vR2l0SHViQXV0b21hdGlvbi5qcyc7XG5pbXBvcnQgU3BlY2lhbGlzdFNlbGVjdG9yIGZyb20gJy4vU3BlY2lhbGlzdFNlbGVjdG9yLmpzJztcblxuY2xhc3MgQXV0b21hdGlvbkVuZ2luZSB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBtYXhSZXRyaWVzOiBjb25maWcubWF4UmV0cmllcyB8fCAzLFxuICAgICAgdGltZW91dDogY29uZmlnLnRpbWVvdXQgfHwgMzAwMDAsXG4gICAgICBhaU1vZGVsOiBjb25maWcuYWlNb2RlbCB8fCAnZ2VtaW5pLTIuMC1mbGFzaCcsXG4gICAgICB0ZW1wZXJhdHVyZTogY29uZmlnLnRlbXBlcmF0dXJlIHx8IDAuNyxcbiAgICAgIC4uLmNvbmZpZyxcbiAgICB9O1xuXG4gICAgdGhpcy52YWxpZGF0b3IgPSBuZXcgU2VjdXJpdHlWYWxpZGF0b3IoKTtcbiAgICB0aGlzLmF1ZGl0TG9nZ2VyID0gbmV3IEF1ZGl0TG9nZ2VyKCk7XG4gICAgdGhpcy5zcGVjaWFsaXN0U2VsZWN0b3IgPSBuZXcgU3BlY2lhbGlzdFNlbGVjdG9yKCk7XG4gICAgXG4gICAgLy8gR2l0SHViIHNlcsOhIGluaWNpYWxpemFkbyBxdWFuZG8gbmVjZXNzw6FyaW9cbiAgICB0aGlzLmdpdEh1YiA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogSW5pY2lhbGl6YXIgR2l0SHViIEF1dG9tYXRpb25cbiAgICovXG4gIGluaXRpYWxpemVHaXRIdWIodG9rZW4pIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5naXRIdWIgPSBuZXcgR2l0SHViQXV0b21hdGlvbih0b2tlbik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBpbmljaWFsaXphciBHaXRIdWI6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRhciBhdXRvbWHDp8OjbyBjb21wbGV0YVxuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZUF1dG9tYXRpb24ocmVxdWVzdCkge1xuICAgIGNvbnN0IGF1dG9tYXRpb25JZCA9IHRoaXMuYXVkaXRMb2dnZXIubG9nQXV0b21hdGlvblJlcXVlc3Qoe1xuICAgICAgdXNlcklkOiByZXF1ZXN0LnVzZXJJZCxcbiAgICAgIHVzZXJuYW1lOiByZXF1ZXN0LnVzZXJuYW1lLFxuICAgICAgY29tbWFuZDogcmVxdWVzdC5jb21tYW5kLFxuICAgICAgbW9kZTogcmVxdWVzdC5tb2RlIHx8ICdPUFRJTUlaRUQnLFxuICAgICAgc2VsZWN0ZWRTcGVjaWFsaXN0OiByZXF1ZXN0LnNlbGVjdGVkU3BlY2lhbGlzdCxcbiAgICAgIGRlc2NyaXB0aW9uOiByZXF1ZXN0LmRlc2NyaXB0aW9uLFxuICAgICAgaXBBZGRyZXNzOiByZXF1ZXN0LmlwQWRkcmVzcyxcbiAgICAgIHVzZXJBZ2VudDogcmVxdWVzdC51c2VyQWdlbnQsXG4gICAgICBzZXNzaW9uSWQ6IHJlcXVlc3Quc2Vzc2lvbklkLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgYXV0b21hdGlvbklkLFxuICAgICAgc3RhdHVzOiAnSU5JVElBVEVEJyxcbiAgICAgIHN0ZXBzOiBbXSxcbiAgICAgIGVycm9yczogW10sXG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBGYXNlIDE6IEFuw6FsaXNlIGRvIGNvbWFuZG9cbiAgICAgIGNvbnNvbGUubG9nKGBcXG7wn5OLIEZBU0UgMTogQW7DoWxpc2UgZG8gY29tYW5kb2ApO1xuICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCB0aGlzLmFuYWx5emVDb21tYW5kKHJlcXVlc3QuY29tbWFuZCk7XG4gICAgICByZXN1bHQuc3RlcHMucHVzaCh7XG4gICAgICAgIHBoYXNlOiAnQU5BTFlTSVMnLFxuICAgICAgICBzdGF0dXM6ICdDT01QTEVURUQnLFxuICAgICAgICBkZXRhaWxzOiBhbmFseXNpcyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGYXNlIDI6IFNlbGXDp8OjbyBkZSBlc3BlY2lhbGlzdGFcbiAgICAgIGNvbnNvbGUubG9nKGBcXG7wn46vIEZBU0UgMjogU2VsZcOnw6NvIGRlIGVzcGVjaWFsaXN0YWApO1xuICAgICAgbGV0IHNwZWNpYWxpc3Q7XG4gICAgICBcbiAgICAgIGlmIChyZXF1ZXN0Lm1vZGUgPT09ICdIWUJSSUQnICYmIHJlcXVlc3Quc2VsZWN0ZWRTcGVjaWFsaXN0KSB7XG4gICAgICAgIHNwZWNpYWxpc3QgPSByZXF1ZXN0LnNlbGVjdGVkU3BlY2lhbGlzdDtcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBFc3BlY2lhbGlzdGEgc2VsZWNpb25hZG8gbWFudWFsbWVudGU6ICR7c3BlY2lhbGlzdH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWNpYWxpc3QgPSBhd2FpdCB0aGlzLnNwZWNpYWxpc3RTZWxlY3Rvci5zZWxlY3RTcGVjaWFsaXN0KFxuICAgICAgICAgIGFuYWx5c2lzLnRhc2tUeXBlLFxuICAgICAgICAgIGFuYWx5c2lzLmtleXdvcmRzXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgRXNwZWNpYWxpc3RhIHNlbGVjaW9uYWRvIGF1dG9tYXRpY2FtZW50ZTogJHtzcGVjaWFsaXN0fWApO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQuc3RlcHMucHVzaCh7XG4gICAgICAgIHBoYXNlOiAnU1BFQ0lBTElTVF9TRUxFQ1RJT04nLFxuICAgICAgICBzdGF0dXM6ICdDT01QTEVURUQnLFxuICAgICAgICBzcGVjaWFsaXN0LFxuICAgICAgICBtb2RlOiByZXF1ZXN0Lm1vZGUsXG4gICAgICB9KTtcblxuICAgICAgLy8gRmFzZSAzOiBHZXJhw6fDo28gZGUgY8OzZGlnb1xuICAgICAgY29uc29sZS5sb2coYFxcbvCfkrsgRkFTRSAzOiBHZXJhw6fDo28gZGUgY8OzZGlnb2ApO1xuICAgICAgY29uc3QgY29kZUdlbmVyYXRpb24gPSBhd2FpdCB0aGlzLmdlbmVyYXRlQ29kZShcbiAgICAgICAgYW5hbHlzaXMsXG4gICAgICAgIHNwZWNpYWxpc3QsXG4gICAgICAgIHJlcXVlc3QucmVwb3NpdG9yeUluZm9cbiAgICAgICk7XG4gICAgICBcbiAgICAgIHJlc3VsdC5zdGVwcy5wdXNoKHtcbiAgICAgICAgcGhhc2U6ICdDT0RFX0dFTkVSQVRJT04nLFxuICAgICAgICBzdGF0dXM6ICdDT01QTEVURUQnLFxuICAgICAgICBmaWxlc0dlbmVyYXRlZDogY29kZUdlbmVyYXRpb24uZmlsZXMubGVuZ3RoLFxuICAgICAgICBsaW5lc09mQ29kZTogY29kZUdlbmVyYXRpb24udG90YWxMaW5lcyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGYXNlIDQ6IFZhbGlkYcOnw6NvIGRlIHNlZ3VyYW7Dp2FcbiAgICAgIGNvbnNvbGUubG9nKGBcXG7wn5SQIEZBU0UgNDogVmFsaWRhw6fDo28gZGUgc2VndXJhbsOnYWApO1xuICAgICAgY29uc3Qgc2VjdXJpdHlWYWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0ZUNvZGUoY29kZUdlbmVyYXRpb24uZmlsZXMpO1xuICAgICAgXG4gICAgICBpZiAoIXNlY3VyaXR5VmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICAgIHJlc3VsdC5zdGF0dXMgPSAnQkxPQ0tFRCc7XG4gICAgICAgIHJlc3VsdC5lcnJvcnMucHVzaCh7XG4gICAgICAgICAgcGhhc2U6ICdTRUNVUklUWV9WQUxJREFUSU9OJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQ8OzZGlnbyBibG9xdWVhZG8gcG9yIHZhbGlkYcOnw6NvIGRlIHNlZ3VyYW7Dp2EnLFxuICAgICAgICAgIGRldGFpbHM6IHNlY3VyaXR5VmFsaWRhdGlvbixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hdWRpdExvZ2dlci5sb2dTZWN1cml0eVZhbGlkYXRpb24oe1xuICAgICAgICAgIGF1dG9tYXRpb25JZCxcbiAgICAgICAgICBmaWxlc0NoZWNrZWQ6IGNvZGVHZW5lcmF0aW9uLmZpbGVzLmxlbmd0aCxcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBzZXZlcml0eTogc2VjdXJpdHlWYWxpZGF0aW9uLnNldmVyaXR5LFxuICAgICAgICAgIGVycm9yczogc2VjdXJpdHlWYWxpZGF0aW9uLmVycm9ycyxcbiAgICAgICAgICB3YXJuaW5nczogc2VjdXJpdHlWYWxpZGF0aW9uLndhcm5pbmdzLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICByZXN1bHQuc3RlcHMucHVzaCh7XG4gICAgICAgIHBoYXNlOiAnU0VDVVJJVFlfVkFMSURBVElPTicsXG4gICAgICAgIHN0YXR1czogJ0NPTVBMRVRFRCcsXG4gICAgICAgIHdhcm5pbmdzOiBzZWN1cml0eVZhbGlkYXRpb24ud2FybmluZ3MubGVuZ3RoLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEZhc2UgNTogQ29tbWl0ICsgUHVzaFxuICAgICAgY29uc29sZS5sb2coYFxcbvCfk50gRkFTRSA1OiBDb21taXQgKyBQdXNoYCk7XG4gICAgICBsZXQgY29tbWl0UmVzdWx0ID0gbnVsbDtcbiAgICAgIFxuICAgICAgaWYgKHJlcXVlc3QucmVwb3NpdG9yeUluZm8gJiYgdGhpcy5naXRIdWIpIHtcbiAgICAgICAgY29tbWl0UmVzdWx0ID0gYXdhaXQgdGhpcy5jb21taXRBbmRQdXNoKFxuICAgICAgICAgIGNvZGVHZW5lcmF0aW9uLmZpbGVzLFxuICAgICAgICAgIGFuYWx5c2lzLmNvbW1pdE1lc3NhZ2UsXG4gICAgICAgICAgcmVxdWVzdC5yZXBvc2l0b3J5SW5mbyxcbiAgICAgICAgICBzcGVjaWFsaXN0XG4gICAgICAgICk7XG5cbiAgICAgICAgcmVzdWx0LnN0ZXBzLnB1c2goe1xuICAgICAgICAgIHBoYXNlOiAnR0lUX0NPTU1JVCcsXG4gICAgICAgICAgc3RhdHVzOiAnQ09NUExFVEVEJyxcbiAgICAgICAgICBjb21taXRIYXNoOiBjb21taXRSZXN1bHQuY29tbWl0LnNoYSxcbiAgICAgICAgICBmaWxlc0NoYW5nZWQ6IGNvbW1pdFJlc3VsdC5maWxlc0NoYW5nZWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBGYXNlIDY6IENyaWFyIFBSIChvcGNpb25hbClcbiAgICAgIGNvbnNvbGUubG9nKGBcXG7wn5SAIEZBU0UgNjogQ3JpYXIgUHVsbCBSZXF1ZXN0IChvcGNpb25hbClgKTtcbiAgICAgIGxldCBwclJlc3VsdCA9IG51bGw7XG4gICAgICBcbiAgICAgIGlmIChyZXF1ZXN0LmNyZWF0ZVBSICYmIHRoaXMuZ2l0SHViICYmIGNvbW1pdFJlc3VsdCkge1xuICAgICAgICBwclJlc3VsdCA9IGF3YWl0IHRoaXMuY3JlYXRlUHVsbFJlcXVlc3QoXG4gICAgICAgICAgYW5hbHlzaXMsXG4gICAgICAgICAgc3BlY2lhbGlzdCxcbiAgICAgICAgICByZXF1ZXN0LnJlcG9zaXRvcnlJbmZvXG4gICAgICAgICk7XG5cbiAgICAgICAgcmVzdWx0LnN0ZXBzLnB1c2goe1xuICAgICAgICAgIHBoYXNlOiAnQ1JFQVRFX1BSJyxcbiAgICAgICAgICBzdGF0dXM6ICdDT01QTEVURUQnLFxuICAgICAgICAgIHByTnVtYmVyOiBwclJlc3VsdC5wci5udW1iZXIsXG4gICAgICAgICAgcHJVcmw6IHByUmVzdWx0LnByLnVybCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN1Y2Vzc28hXG4gICAgICByZXN1bHQuc3RhdHVzID0gJ1NVQ0NFU1MnO1xuICAgICAgcmVzdWx0Lm91dHB1dCA9IHtcbiAgICAgICAgZmlsZXM6IGNvZGVHZW5lcmF0aW9uLmZpbGVzLFxuICAgICAgICBjb21taXQ6IGNvbW1pdFJlc3VsdD8uY29tbWl0LFxuICAgICAgICBwcjogcHJSZXN1bHQ/LnByLFxuICAgICAgfTtcblxuICAgICAgLy8gTG9nIGRlIGNvbmNsdXPDo29cbiAgICAgIHRoaXMuYXVkaXRMb2dnZXIubG9nQXV0b21hdGlvbkNvbXBsZXRpb24oe1xuICAgICAgICBhdXRvbWF0aW9uSWQsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWQsXG4gICAgICAgIHN0YXR1czogJ1NVQ0NFU1MnLFxuICAgICAgICB0b3RhbER1cmF0aW9uOiByZXN1bHQudG90YWxEdXJhdGlvbixcbiAgICAgICAgY29tbWl0SGFzaDogY29tbWl0UmVzdWx0Py5jb21taXQuc2hhLFxuICAgICAgICBwclVybDogcHJSZXN1bHQ/LnByLnVybCxcbiAgICAgICAgZmlsZXNDcmVhdGVkOiBjb2RlR2VuZXJhdGlvbi5maWxlcy5sZW5ndGgsXG4gICAgICAgIGxpbmVzQWRkZWQ6IGNvZGVHZW5lcmF0aW9uLnRvdGFsTGluZXMsXG4gICAgICAgIHNwZWNpYWxpc3QsXG4gICAgICAgIG1vZGU6IHJlcXVlc3QubW9kZSxcbiAgICAgICAgY3JlZGl0c1VzZWQ6IHJlcXVlc3QuY3JlZGl0c1VzZWQsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm8gbmEgYXV0b21hw6fDo286ICR7ZXJyb3IubWVzc2FnZX1gKTtcblxuICAgICAgcmVzdWx0LnN0YXR1cyA9ICdGQUlMRUQnO1xuICAgICAgcmVzdWx0LmVycm9ycy5wdXNoKHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIExvZyBkZSBlcnJvXG4gICAgICB0aGlzLmF1ZGl0TG9nZ2VyLmxvZ0Vycm9yKHtcbiAgICAgICAgYXV0b21hdGlvbklkLFxuICAgICAgICB1c2VySWQ6IHJlcXVlc3QudXNlcklkLFxuICAgICAgICBlcnJvclR5cGU6IGVycm9yLmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgZXJyb3JTdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgICAgIHBoYXNlOiByZXN1bHQuc3RlcHNbcmVzdWx0LnN0ZXBzLmxlbmd0aCAtIDFdPy5waGFzZSB8fCAnVU5LTk9XTicsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW5hbGlzYXIgY29tYW5kbyBkbyB1c3XDoXJpb1xuICAgKi9cbiAgYXN5bmMgYW5hbHl6ZUNvbW1hbmQoY29tbWFuZCkge1xuICAgIC8vIEFxdWkgc2VyaWEgY2hhbWFkYSB1bWEgSUEgcGFyYSBhbmFsaXNhciBvIGNvbWFuZG9cbiAgICAvLyBQb3IgZW5xdWFudG8sIGFuw6FsaXNlIHNpbXBsZXNcbiAgICBcbiAgICBjb25zdCBrZXl3b3JkcyA9IGNvbW1hbmQudG9Mb3dlckNhc2UoKS5zcGxpdCgnICcpO1xuICAgIFxuICAgIGxldCB0YXNrVHlwZSA9ICdHRU5FUkFMJztcbiAgICBpZiAoY29tbWFuZC5pbmNsdWRlcygnY29tcG9uZW50ZScpIHx8IGNvbW1hbmQuaW5jbHVkZXMoJ2NvbXBvbmVudCcpKSB0YXNrVHlwZSA9ICdDT01QT05FTlQnO1xuICAgIGlmIChjb21tYW5kLmluY2x1ZGVzKCdmdW7Dp8OjbycpIHx8IGNvbW1hbmQuaW5jbHVkZXMoJ2Z1bmN0aW9uJykpIHRhc2tUeXBlID0gJ0ZVTkNUSU9OJztcbiAgICBpZiAoY29tbWFuZC5pbmNsdWRlcygndGVzdGUnKSB8fCBjb21tYW5kLmluY2x1ZGVzKCd0ZXN0JykpIHRhc2tUeXBlID0gJ1RFU1QnO1xuICAgIGlmIChjb21tYW5kLmluY2x1ZGVzKCdlc3RpbG8nKSB8fCBjb21tYW5kLmluY2x1ZGVzKCdzdHlsZScpKSB0YXNrVHlwZSA9ICdTVFlMRSc7XG4gICAgaWYgKGNvbW1hbmQuaW5jbHVkZXMoJ2RvY3VtZW50YcOnw6NvJykgfHwgY29tbWFuZC5pbmNsdWRlcygnZG9jdW1lbnRhdGlvbicpKSB0YXNrVHlwZSA9ICdET0NVTUVOVEFUSU9OJztcbiAgICBpZiAoY29tbWFuZC5pbmNsdWRlcygncmVmYXRvcmFyJykgfHwgY29tbWFuZC5pbmNsdWRlcygncmVmYWN0b3InKSkgdGFza1R5cGUgPSAnUkVGQUNUT1InO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbW1hbmQsXG4gICAgICB0YXNrVHlwZSxcbiAgICAgIGtleXdvcmRzLFxuICAgICAgY29tbWl0TWVzc2FnZTogYGZlYXQ6ICR7Y29tbWFuZC5zdWJzdHJpbmcoMCwgNTApfWAsXG4gICAgICBkZXNjcmlwdGlvbjogY29tbWFuZCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdlcmFyIGPDs2RpZ28gdmlhIElBXG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZUNvZGUoYW5hbHlzaXMsIHNwZWNpYWxpc3QsIHJlcG9zaXRvcnlJbmZvKSB7XG4gICAgLy8gQXF1aSBzZXJpYSBjaGFtYWRhIGEgSUEgKEdlbWluaSwgR1JPUSwgZXRjKVxuICAgIC8vIFBvciBlbnF1YW50bywgc2ltdWxhw6fDo29cbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+kliBHZXJhbmRvIGPDs2RpZ28gY29tICR7c3BlY2lhbGlzdH0uLi5gKTtcblxuICAgIC8vIFNpbXVsYXIgZ2VyYcOnw6NvIGRlIGPDs2RpZ29cbiAgICBjb25zdCBmaWxlcyA9IFtcbiAgICAgIHtcbiAgICAgICAgcGF0aDogYHNyYy9nZW5lcmF0ZWRfJHtEYXRlLm5vdygpfS5qc2AsXG4gICAgICAgIGNvbnRlbnQ6IGAvLyBHZXJhZG8gYXV0b21hdGljYW1lbnRlIHBvciAke3NwZWNpYWxpc3R9XFxuLy8gVGFyZWZhOiAke2FuYWx5c2lzLmRlc2NyaXB0aW9ufVxcblxcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdlbmVyYXRlZCgpIHtcXG4gIC8vIEPDs2RpZ28gZ2VyYWRvIGFxdWlcXG59XFxuYCxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIHJldHVybiB7XG4gICAgICBmaWxlcyxcbiAgICAgIHRvdGFsTGluZXM6IGZpbGVzLnJlZHVjZSgoc3VtLCBmKSA9PiBzdW0gKyBmLmNvbnRlbnQuc3BsaXQoJ1xcbicpLmxlbmd0aCwgMCksXG4gICAgICBzcGVjaWFsaXN0LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhciBjw7NkaWdvXG4gICAqL1xuICBhc3luYyB2YWxpZGF0ZUNvZGUoZmlsZXMpIHtcbiAgICBjb25zb2xlLmxvZyhg8J+UjSBWYWxpZGFuZG8gJHtmaWxlcy5sZW5ndGh9IGFycXVpdm9zLi4uYCk7XG5cbiAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0b3IudmFsaWRhdGVGaWxlcyhmaWxlcyk7XG5cbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgY29uc29sZS5sb2coYOKdjCBWYWxpZGHDp8OjbyBmYWxob3UhYCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcsXG4gICAgICAgIGVycm9yczogdmFsaWRhdGlvbi5kZXRhaWxzLmZsYXRNYXAoZCA9PiBkLmVycm9ycyksXG4gICAgICAgIHdhcm5pbmdzOiB2YWxpZGF0aW9uLmRldGFpbHMuZmxhdE1hcChkID0+IGQud2FybmluZ3MpLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg4pyFIEPDs2RpZ28gdmFsaWRhZG8gY29tIHN1Y2Vzc28hYCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICBzZXZlcml0eTogJ25vbmUnLFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIHdhcm5pbmdzOiB2YWxpZGF0aW9uLmRldGFpbHMuZmxhdE1hcChkID0+IGQud2FybmluZ3MpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRmF6ZXIgY29tbWl0ICsgcHVzaFxuICAgKi9cbiAgYXN5bmMgY29tbWl0QW5kUHVzaChmaWxlcywgbWVzc2FnZSwgcmVwb3NpdG9yeUluZm8sIHNwZWNpYWxpc3QpIHtcbiAgICBjb25zb2xlLmxvZyhg8J+TnSBGYXplbmRvIGNvbW1pdCArIHB1c2guLi5gKTtcblxuICAgIGlmICghdGhpcy5naXRIdWIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignR2l0SHViIG7Do28gaW5pY2lhbGl6YWRvJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5naXRIdWIuY29tbWl0QW5kUHVzaChcbiAgICAgIHJlcG9zaXRvcnlJbmZvLm93bmVyLFxuICAgICAgcmVwb3NpdG9yeUluZm8ucmVwbyxcbiAgICAgIGZpbGVzLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIHJlcG9zaXRvcnlJbmZvLmJyYW5jaCB8fCAnbWFpbicsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IGAke3NwZWNpYWxpc3R9IEJvdGAsXG4gICAgICAgIGVtYWlsOiBgJHtzcGVjaWFsaXN0LnRvTG93ZXJDYXNlKCl9QHJrbW1heC5jb21gLFxuICAgICAgfVxuICAgICk7XG5cbiAgICBjb25zb2xlLmxvZyhg4pyFIENvbW1pdCByZWFsaXphZG86ICR7cmVzdWx0LmNvbW1pdC5zaGEuc3Vic3RyaW5nKDAsIDcpfWApO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmlhciBQdWxsIFJlcXVlc3RcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVB1bGxSZXF1ZXN0KGFuYWx5c2lzLCBzcGVjaWFsaXN0LCByZXBvc2l0b3J5SW5mbykge1xuICAgIGNvbnNvbGUubG9nKGDwn5SAIENyaWFuZG8gUHVsbCBSZXF1ZXN0Li4uYCk7XG5cbiAgICBpZiAoIXRoaXMuZ2l0SHViKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dpdEh1YiBuw6NvIGluaWNpYWxpemFkbycpO1xuICAgIH1cblxuICAgIGNvbnN0IGJyYW5jaE5hbWUgPSBgYXV0b21hdGlvbi8ke3NwZWNpYWxpc3QudG9Mb3dlckNhc2UoKX0vJHtEYXRlLm5vdygpfWA7XG5cbiAgICBjb25zdCBwciA9IGF3YWl0IHRoaXMuZ2l0SHViLmNyZWF0ZVB1bGxSZXF1ZXN0KFxuICAgICAgcmVwb3NpdG9yeUluZm8ub3duZXIsXG4gICAgICByZXBvc2l0b3J5SW5mby5yZXBvLFxuICAgICAgYFske3NwZWNpYWxpc3R9XSAke2FuYWx5c2lzLmNvbW1pdE1lc3NhZ2V9YCxcbiAgICAgIGBBdXRvbWHDp8OjbyBleGVjdXRhZGEgcG9yICR7c3BlY2lhbGlzdH1cXG5cXG5UYXJlZmE6ICR7YW5hbHlzaXMuZGVzY3JpcHRpb259YCxcbiAgICAgIGJyYW5jaE5hbWUsXG4gICAgICByZXBvc2l0b3J5SW5mby5icmFuY2ggfHwgJ21haW4nXG4gICAgKTtcblxuICAgIGNvbnNvbGUubG9nKGDinIUgUFIgY3JpYWRvOiAke3ByLnVybH1gKTtcblxuICAgIHJldHVybiB7IHByIH07XG4gIH1cblxuICAvKipcbiAgICogT2J0ZXIgaGlzdMOzcmljbyBkZSBhdXRvbWHDp8O1ZXNcbiAgICovXG4gIGdldEF1dG9tYXRpb25IaXN0b3J5KHVzZXJJZCwgbGltaXQgPSA1MCkge1xuICAgIHJldHVybiB0aGlzLmF1ZGl0TG9nZ2VyLnNlYXJjaExvZ3Moe1xuICAgICAgdHlwZTogJ0FVVE9NQVRJT05fUkVRVUVTVCcsXG4gICAgICB1c2VySWQsXG4gICAgfSkuc2xpY2UoLWxpbWl0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRlciBlc3RhdMOtc3RpY2FzIGRlIGF1dG9tYcOnw6NvXG4gICAqL1xuICBnZXRBdXRvbWF0aW9uU3RhdHModXNlcklkKSB7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMuYXVkaXRMb2dnZXIuc2VhcmNoTG9ncyh7IHVzZXJJZCB9KTtcblxuICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgdG90YWxBdXRvbWF0aW9uczogbG9ncy5sZW5ndGgsXG4gICAgICBzdWNjZXNzZnVsQXV0b21hdGlvbnM6IGxvZ3MuZmlsdGVyKGwgPT4gbC5zdGF0dXMgPT09ICdTVUNDRVNTJykubGVuZ3RoLFxuICAgICAgZmFpbGVkQXV0b21hdGlvbnM6IGxvZ3MuZmlsdGVyKGwgPT4gbC5zdGF0dXMgPT09ICdGQUlMRUQnKS5sZW5ndGgsXG4gICAgICBibG9ja2VkQXV0b21hdGlvbnM6IGxvZ3MuZmlsdGVyKGwgPT4gbC5zdGF0dXMgPT09ICdCTE9DS0VEJykubGVuZ3RoLFxuICAgICAgYnlNb2RlOiB7fSxcbiAgICAgIGJ5U3BlY2lhbGlzdDoge30sXG4gICAgfTtcblxuICAgIGxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgaWYgKGxvZy5tb2RlKSB7XG4gICAgICAgIHN0YXRzLmJ5TW9kZVtsb2cubW9kZV0gPSAoc3RhdHMuYnlNb2RlW2xvZy5tb2RlXSB8fCAwKSArIDE7XG4gICAgICB9XG4gICAgICBpZiAobG9nLnNlbGVjdGVkU3BlY2lhbGlzdCkge1xuICAgICAgICBzdGF0cy5ieVNwZWNpYWxpc3RbbG9nLnNlbGVjdGVkU3BlY2lhbGlzdF0gPSAoc3RhdHMuYnlTcGVjaWFsaXN0W2xvZy5zZWxlY3RlZFNwZWNpYWxpc3RdIHx8IDApICsgMTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBzdGF0cztcbiAgfVxufVxuXG4vLyBFeHBvcnRhclxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gQXV0b21hdGlvbkVuZ2luZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQXV0b21hdGlvbkVuZ2luZTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxpQkFBaUIsTUFBTSx3QkFBd0I7QUFD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